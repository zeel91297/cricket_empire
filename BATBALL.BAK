#include <stdio.h>
#include <graphics.h>
#include <conio.h>
#include <stdlib.h>
#include <dos.h>
#include <math.h>

int gmode = DETECT, gdriver;
int xx, yy;
int midx, midy;

void rotate(int x1,int y1,int x2,int y2,int x3,int y3,int x4,int y4)
{
	int n=0;
	int arr[][2]={
		{x1,y1},
		{x2,y2},
		{x3,y3},
		{x4,y4}
		};

	int i;
	float rx,ry;
	float t=(180*3.14159)/180;
	for(i=0;i<4;i++)
	{
		rx=arr[i][0]*cos(t)-arr[i][1]*sin(t);
		ry=arr[i][0]*sin(t)+arr[i][1]*cos(t);
		arr[i][0]=rx;
		arr[i][1]=ry;
	}

	//int i;
	for(i=0;i<n;i++)
	{
		if(i==(n-1))
		{
		line(arr[n-1][0],getmaxy()-arr[n-1][1],arr[0][0],getmaxy()-arr[0][1]);
		}
		else
		{
			line(arr[i][0],getmaxy()-arr[i][1],arr[i+1][0],getmaxy()-arr[i+1][1]);
		}
	}
}

void main()
{
	clrscr();
	initgraph(&gmode, &gdriver, "C:\\TC\\BGI");
	clearviewport();
	cleardevice();

	//	rectangle(2,2,518,427); left,top,right,bottom
	xx = getmaxx();
	yy = getmaxy();
	midx = getmaxx() / 2;
	midy = getmaxy() / 2;
	printf(" %d %d %d %d", xx, yy,midx,midy);
	//setcolor(14);
	line(0, midy + 100, xx, midy + 100);

/*	rectangle(560,215,570,250);
	rectangle(550,325,580,250);*/

	/*line(560,215,570,215);
	line(570,215,570,250);
	line(570,250,560,250);
	line(560,250,560,215);

	line(550,325,580,325);
	line(580,325,580,250);
	line(580,250,550,250);
	line(550,250,550,325);*/


	//rotate(560,215,570,215,570,250,560,215);
	//rotate
	line(570,getmaxy()-235,580,getmaxy()-215);
	line(580,getmaxy()-215,560,getmaxy()-250);
	//line(560,250,550,260);
	//line(550,260,570,225);

	/*line(550,325,580,325);
	line(580,325,580,250);
	line(580,250,550,250);
	line(550,250,550,325);*/

	//ball
	float x = 1, y = 0.00000, j = .5, count = .1;
	float r = 10;
	//sleep(1);
	for (int k = 0; k <= 1; k++)
	{
		for (float i = 90; i < 270; i += 10)
		{
			y = cos(((i * 22 / 7) / 180)) / j;
			if (y > 0)
				y = -y;
			x += 15;
			setcolor(14);
			//setfillstyle(1, 14);
			circle(x, y * 100 + midx, r);
			//floodfill(x, y * 100 + 200, 14);
			delay(100);
			setcolor(0);
			setfillstyle(1, 0);
			circle(x, y * 100 + midx, r);
			//floodfill(x, y * 100 + 200, 0);
				//printf("%d %d",x,y);

		}
		j += count;
		count += .1;
	}

	//bat
	//delay(30);

	setcolor(14);
	circle(150,400,15);

	/*int c,t=400;
	int pixy=0;
	setcolor(RED);
	setfillstyle(SOLID_FILL, RED);
	for (int z = 1; z <10 ; z++)
	{
		cleardevice();
		circle(z, pixy, 10);
		floodfill(z, pixy, RED);
		delay(100);
		if (pixy >= 400)
		{
			c = 0;
			t -= 20;
		}
		if (pixy <= (400 - t))
			c = 1;
		pixy = pixy + (c ? 15 : -15);
	} */

	getch();
}